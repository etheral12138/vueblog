---
title: 计算机网络
date: 2023-02-20
icon: network
category:
- 计算机基础
tag:
- 计算机基础
---



## 两种网络模型

### OSI参考模型

物理层使用的中间设备是转发器

数据链路层使用的中间设备是网桥或者桥接器

网络层使用的中间设备是路由器

网络层以上使用的是网关

网络层：路由器、防火墙

数据链路层：网卡、网桥、交换机

物理层：中继器、集线器、网线、网卡

中继器具有放大信号的作用，它实际上是一种信号再生放大器。因而中继器用来扩展局域网段的长度，驱动长距离通信。

**广播域是OSI模型中第二层的概念**，所以Hub、中继器、交换机、网桥等第一，第二层设备连接的节点被认为都是在同一个广播域。而路由器这样的第三层交换机才可以划分广播域。 

 而**冲突域是OSI模型中第一层的概念**，连接同一冲突域的设备有Hub，中继器或者其他进行简单复制信号的设备。用Hub或者中继器连接的所有节点可以被认为是在同一个冲突域内。而第二层设备（网桥，交换机），和第三层设备（路由器）都可以划分冲突域。

集线器，中继器是物理层设备，不能划分冲突域和广播域；（导致冲突域扩大）

集线器主要功能是对接收到的信号进行再生整型放大，以扩大网络的传输距离，同时把所有节点集中在以它为中心的节点上。当把所有节点集中在以它为中心的节点上时，会导致冲突域的增大。

交换机是数据链路层设备，可以划分冲突域，但不能划分广播域，会导致冲突域减小；

路由器是网络层设备，可以划分广播域；

1.物理层----比特

2.数据链路层----帧

3.网络层-------包（数据报）

4.传输层------（报文）段

5.会话层-----数据单元

6.表示层----数据单元

7.应用层----数据单元（报文）

消息，报文，message，一般指完整的信息，传输层实现报文交付。我们将位于应用层的信息分组称为报文。

数据段，报文段，segment，组成报文的每个分组。我们将运输层分组称为报文段。

分组、数据包，packet，信息在互联网当中传输的单元，网络层实现分组交付。用抓包工具抓到的一条条记录就是包。
数据报，Datagram，通过网络传输的数据的基本单元，包含一个报头（header）和数据本身，其中报头描述了数据的目的地以及和其它数据之间的关系。可以理解为传输数据的分组。我们将通过网络传输的数据的基本单元称为数据报。

数据链路层协议：PPP ARP MAC IEEE802.3

网络层协议：IP BGMP

传输层协议：TCP UDP

应用层协议：HTTP HTTPS FTP Telnet SMTP

**RIP (Routing Information Protocol)** 

RIP 是一种**分布式的基于距离向量**的路由选择协议。  

从一路由器到直接连接的网络的距离定义为 1。   

从一个路由器到非直接连接的网络的距离定义为所经过的路由器数加 1。   

RIP 协议中的**“距离”也称为“跳数”(hop count)**，因为每经过一个路由器，跳数就加 1。   

RIP 允许一条路径最多只能包含 **15 个路由器。**    

“距离”的最大值为16 时即相当于不可达。可见 **RIP 只适用于小型互联网。**

停止等待协议是最简单的自动重传请求方法（ARQ,Automatic Repeat-reQuest）。连续出现相同发送序号的数据帧，表明发送端进行了超时重传。连续出现相同序号的确认帧，表明接收端收到了重复帧。

ARP是地址解析协议，用来解析Mac和IP地址。

PAP：密码口令验证协议，全称：Password Authentication Protocol。PAP是两次握手认证协议，在链路首次初始化时，被认证端首先发起认证请求，向认证端发送用户名和密码信息进行身份认证。密码口令以明文发送，所以安全性较低。 

 CHAP：挑战握手认证协议，全称：Challenge Handshake Authentication Protocol。CHAP通过三次握手验证被认证端的身份，在初始链路建立时完成，为了提高安全性，在链路建立之后周期性进行验证。CHAP比PAP更安全，因为CHAP不在线路上发送明文，而是发送经过MD5过的随机数序列。

100表示传输速率为100Mbps

Base表示通过基带传输

T表示传输介质，twisted pair，双绞线。

F表示光纤，fiber。

C表示coaxial cable，同轴电缆。

OSI层与层之间交换数据的单位是SDU（服务数据单元）,对等层即同一层之间传输的叫PDU（协议数据单元）

SDU（service Data Unit）:服务数据单元，又叫业务数据单元，是指定层的用户服务的数据集，传送到接收方的时候同一协议层时数据没有发生变化，即业务部分，然后发给下层之后，下层将其封装在PDU中发送出去。服务数据单元是从高层协议来的信息单元传送到低层协议。第N层服务数据单元SDU，和上一层的协议数据单元（PDU）是一一对应的。根据协议数据单元的数据的不同，送到接收端的指定层。     

 PDU（Ptotocol data unit）: 协议数据单元：**计算机网络各层对等实体间交换的单位信息**，例如TCP层的PDU就是segment（分节）、应用层间交换的PDU则是application data（应用数据）

在各层间传输数据时，把从第n+1层收到的PDU作为第n层的SDU，加上第n层的PCI，就变成了第n层的PDU,交给第n-1层后作为SDU发送，接收方接收时做相反的处理。 三者的关系为：n-SDU+n-PCI=n-PDU=(n-1)-SDU

移动IP：基于固定互联网的路由选择协议、连接到因特网；

移动自组网络：有特定的路由选择协议、可以不连接到因特网（此时称：残桩网络）

移动自组网络：无固定基础设施的无限局域网

IEEE802.11 ：有固定基础设施的无限局域网

电路交换：整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。 

报文交换：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。 

分组交换：单个分组（这只是整个报文的一部分）传送到相邻结点，存储下来后查看转发表，转发到下一个结点。

计算机技术是通信技术和计算机技术结合的产物

1． 像集线器一样，交换机提供了大量可供线缆连接的端口，这样可以采用星型拓扑布线。 

2． 像中继器、集线器和网桥那样，当它转发帧时，交换机会重新产生一个不失真的方形电信号。 

3． 像网桥那样，交换机在每个端口上都使用相同的转发或过滤逻辑。 

4． 像网桥那样，交换机将局域网分为多个冲突域，每个冲突域都是有独立的宽带，因此大大提高了局域网的带宽。 

5． 除了具有网桥、集线器和中继器的功能以外，交换机还提供了更先进的功能，如虚拟局域网（VLAN）和更高的性能。

TCP 报文段首部的前 20 个字节是固定的，后面有 4n 字节是根据需要而增加的选项 (n 是整数)。 一个IP数据报首部的长度也是20字节，

数据报方式能保证各数据报按发出顺序到达目的节点。

数据链路（逻辑线路）：在一条物理线路之上，通过一些规程或协议来控制这些数据的传输，以保证被传输数据的正确性。 

  实现这些规程或协议的硬件和软件加到物理线路，这样就构成了——数据链路  。 

  从数据发送点到数据接收点（点到点 point to point）所经过的传输途径。

ADSL属于DSL技术的一种，非对称数字用户环路，上行下行速率不同，用现有电话线，不需重新布线，互相之间不干扰

T是Twisted Pair双绞线的首字母。100BASET的意思是在双绞线上传送10Mb/s基带信号的星型拓扑以太网。

多项式与二进制的直接对应关系： 　　

X的最高次幂对应二进制的最高位数；以下各位对应多项式的各幂次，有幂次对应1，无幂次对应0；X的最高次幂是R，转换对应的二进制数R+1位；

**数字信号是离散的，模拟信号是连续的**

### TCP/IP模型



## HTTP

### 常见端口号

**http 80**

**ftp 20/21**

**ssh 22**

**telnet 23**

**smtp 25**

### HTTPS

![image-20230420220621893](https://etheral.oss-cn-shanghai.aliyuncs.com/images/image-20230420220621893.png)

通过在传输内容中加入加密信息的哈希值保证传输信息的完整性

![image-20230420220714330](https://etheral.oss-cn-shanghai.aliyuncs.com/images/image-20230420220714330.png)

![image-20230420220945086](https://etheral.oss-cn-shanghai.aliyuncs.com/images/image-20230420220945086.png)

数字签名校验

![image-20230420221042520](https://etheral.oss-cn-shanghai.aliyuncs.com/images/image-20230420221042520.png)



## TCP

TCP是点对点的传输协议，所以没有多播服务

TCP/IP协议层分为数据链路层-->网络层-->传输层-->应用层

TIME_WAIT出现在主动关闭一方，CLOSE_WAIT出现在被动关闭一方

## IP

每个 IP 地址分为 4 段；段与段之间用小数点隔开；每段再用一个十进制整数表示；每个十进制整数的取值范围是 0-255；

私有IP地址范围： 

A: 10.0.0.0~10.255.255.255 即10.0.0.0/8 

B:172.16.0.0~172.31.255.255即172.16.0.0/12 

C:192.168.0.0~192.168.255.255 即192.168.0.0/16

pathping 是指提供有关在源和目标之间的中间跃点处网络滞后和网络丢失的信息。

nslookup可以指定查询的类型，可以查到DNS记录的生存时间还可以指定使用哪个 [DNS服务器](https://hd.nowcoder.com/link.html?target=http://baike.baidu.com/item/DNS服务器) 进行解释。

SMTP：邮件传输协议，工作在应用层 

FTP：文件传输协议，工作在应用层 

UDP：用户数据报协议，工作在传输层 

TELNET：是TCP/IP协议中的一员，是Internet远程登录服务的标准协议和主要方式，工作在应用层

### ARP协议

工作流程

当一个基于TCP/IP的应用程序需要从一台主机发送数据给另一台主机时，它把信息分割并封装成包，附上目的主机的IP地址。然后，寻找IP地址到实际MAC地址的映射，这需要发送ARP广播消息。当ARP找到了目的主机MAC地址后，就可以形成待发送帧的完整以太网帧头。最后，协议栈将IP包封装到以太网帧中进行传送。

![图1](https://etheral.oss-cn-shanghai.aliyuncs.com/images/1746310.jpg)

在图1中，当主机A要和主机B通信（如主机A  Ping主机B）时。主机A会先检查其ARP缓存内是否有主机B的MAC地址。如果没有，主机**A会发送一个ARP请求广播包**，此包内包含着其欲与之通信的主机的IP地址，也就是主机B的IP地址。 

  当主机**B收到此广播后，会将自己的MAC地址利用ARP协议响应包传给主机A，并更新自己的ARP缓存**，也就是同时将主机A的IP地址/MAC地址对保存起来，以供后面使用。主机A在得到主机B的MAC地址后，就可以与主机B通信了。同时，主机**A也将主机B的IP地址/MAC地址对保存在自己的ARP协议缓存内**。

![731D0633D1A6251C6B2BFE88935BB5BD](https://etheral.oss-cn-shanghai.aliyuncs.com/images/731D0633D1A6251C6B2BFE88935BB5BD.png)

### DHCP

DHCP Client以广播的方式发出DHCP Discover报文。    

   所有的DHCP Server都能够接收到DHCP Client发送的DHCP Discover报文，所有的DHCP Server都会给出响应，向DHCP Client发送一个DHCP Offer报文。（**初始状态**）    

   DHCP Client收到来自很多DHCP Server的DHCP Offer报文，但只处理最早来到的DHCP Offer报文。（**选择状态**）    

   然后DHCP Client会发出一个广播的DHCP Request报文，在选项字段中会加入选中的DHCP Server的IP地址和需要的IP地址。DHCP Server收到DHCP Request报文后，判断选项字段中的IP地址是否与自己的地址相同。如果不相同，DHCP Server不做任何处理只清除相应IP地址分配记录；如果相同，DHCP Server就会向DHCP Client响应一个DHCP ACK报文，并在选项字段中增加IP地址的使用租期信息。（**请求状态**）    

   DHCP Client接收到DHCP ACK报文后，检查DHCP Server分配的IP地址是否能够使用。如果可以使用，则DHCP Client成功获得IP地址并根据IP地址使用租期自动启动续延过程。（**绑定状态**）



## 面试题

#### 1.说一说cookie sessionStorage localStorage 区别？

**cookie**数据始终在同源的http请求中携带（即使不需要），即cookie在浏览器和服务器间来回传递，而**sessionStorage**和**localStorage**不会自动把数据发送给服务器，仅在**本地**保存。

#### 2.HTTP（超文本传输协议）是什么？

Http是超文本传输协议，它是应用层的面向对象的协议，它是基于TCP/IP的高级协议，默认端口号是80，它是无状态的。

#### 3.GET和POST请求的区别

GET提交的数据会在地址栏中显示出来，而POST提交，地址栏不会改变

#### 4.Web Storage和Cookie的区别

##### WebStorage:

优点：
存储空间更大。在IE下每个独立存储空间为10M，其它浏览器存储空间略有不同，但可以肯定的是至少要比cookie要大很多。
存储内容不会与服务器发生任何交互，数据仅仅单纯地存储在本地。不用担心对服务器数据的影响！
独立的存储空间，每个域都有自己独立的存储空间，各个存储空间又完全是独立的，所以不会对数据千万混乱。
缺点：
存储在本地的数据未加密且永远不会过期，容易造成隐私泄漏！
存储的数据类型只能是字符串；

##### Cookie:

优点：
可配置到期规则 Cookie 可以在浏览器会话结束时到期，或者可以在客户端计算机上无限期存在，这取决于客户端的到期规则。
不需要任何服务器资源 Cookie 存储在客户端并在发送后由服务器读取。
简单性 Cookie 是一种基于文本的轻量结构，包含简单的键值对。
数据持久性 虽然客户端计算机上 Cookie 的持续时间取决于客户端上的 Cookie 过期处理和用户干预，Cookie 通常是客户端上持续时间最长的数据保留形式。
缺点：
大小受到限制 大多数浏览器对 Cookie 的大小有 4096 字节的限制，尽管在当今新的浏览器和客户端设备版本中，支持 8192 字节的 Cookie 大小已愈发常见。
用户配置为禁用 有些用户禁用了浏览器或客户端设备接收 Cookie 的能力，因此限制了这一功能。
潜在的安全风险 Cookie 可能会被篡改。用户可能会操纵其计算机上的 Cookie，这意味着会对安全性造成潜在风险或者导致依赖于 Cookie 的应用程序失败。另外，虽然 Cookie 只能被将它们发送到客户端的域访问，历史上黑客已经发现从用户计算机上的其他域访问 Cookie 的方法。您可以手动加密和解密 Cookie，但这需要额外的编码，并且因为加密和解密需要耗费一定的时间而影响应用程序的性能。
注意：Cookie 通常用于为已知用户自定义内容的个性化情况。在大多数此类情况中，Cookie 是作为“标识”而不是“身份验证”。因此，通常保护用于标识的 Cookie 的方法是在 Cookie 中存储用户名、帐户名或唯一用户 ID（例如 GUID），然后用以访问站点的用户个性化结构中的信息。
两者之间有一个共同点：都是保存在浏览器端,并且且同源的；

##### 区别：

1、cookie数据始终在同源的http请求中携带(即使不需要)，即cookie在浏览器和服务器间来回传递
2、cookie数据还有路径（path）的概念，可以限制。cookie只属于某个路径下、
3、存储大小限制也不同，cookie数据不能超过4K，同时因为每次http请求都会携带cookie，所以cookie只适合保存很小的数据，如回话标识。
4、webStorage虽然也有存储大小的限制，但是比cookie大得多，可以达到5M或更大
5、数据的有效期不同：
sessionStorage：仅在当前的浏览器窗口关闭有效；
localStorage：始终有效，窗口或浏览器关闭也一直保存，因此用作持久数据；
cookie：只在设置的cookie过期时间之前一直有效，即使窗口和浏览器关闭
6、作用域不同：
sessionStorage：不在不同的浏览器窗口中共享，即使是同一个页面；
localStorage：在所有同源窗口都是共享的；
cookie：也是在所有同源窗口中共享的；
7、webStorage支持事件通知机制，可以将数据更新的通知发生给监听者
8、webStorage的API接口使用更方便；

